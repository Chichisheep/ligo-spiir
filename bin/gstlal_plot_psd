#!/usr/bin/python

import sys
import matplotlib
matplotlib.use('Agg')
import pylab
import numpy
from gstlal.reference_psd import read_psd

if len(sys.argv != 3):
	print "USAGE gstlal_plot_psd psd_name output_name"
	sys.exit()

fname = sys.argv[1]
outname = sys.argv[2]

psd = read_psd(fname, True)
for k,v in psd.items():
	pylab.plot(v.deltaF * numpy.arange(len(v.data)), v.data)
	pylab.xlabel('Frequency (Hz)')
	pylab.ylabel('Strain/Hz')
	pylab.savefig('%s-%s.png', k, outname)
